<div class="container mt-4">
    <div class="row ">
        <div class="col-9">
            <div class="mt-3">
                <span>
                    <strong>
                        <a href="/categories/group/{{article.group_id}}"
                            class="text-primary text-uppercase">{{article.group_name}}</a>
                    </strong> >
                    <strong>
                        <a href="/category/{{article.category_id}}"
                            class="text-primary text-uppercase">{{article.category_name}}</a>
                    </strong>
                </span>
                <span class="float-right text-muted"><strong>Published at:</strong> {{formatDate
                    article.published_at}}</span>
            </div>
            <h1 class="mt-3">{{article.title}}</h1>
            <p><strong>Author:</strong> <a href="/users/{{article.author_id}}"
                    class="text-primary">{{article.author_name}}</a></p>
            <hr>
            <div class="mb-3">
                <strong>{{article.abstract}}</strong>
            </div>
            <div class="mt-3">
                <div class="article-content" style="max-width: 100%;">
                    {{{article.content}}}
                </div>
            </div>
            <hr>
            <div class="mt-3">
                <strong class="me-2">
                    <i class="bi bi-tag-fill text-danger me-1"></i> Chủ đề:
                </strong>
                {{#each article.hashtags}}
                <a href="/hashtags/{{this.id}}"
                    class="badge rounded-pill bg-light text-danger border border-secondary me-2 ml-1">
                    {{this.name}}
                </a>
                {{/each}}
            </div>
            <hr>
            <div class="mt-4">
                <h5>TIN NỔI BẬT</h5>
                <hr>
                <div class="card bg-light">
                    {{#each category_articles}}
                    <a href="/articles?id={{this.id}}" class="text-decoration-none text-dark position-relative">
                        <div class="card-body py-2">
                            <div class="row no-gutters">
                                <div class="col-md-4 d-flex align-items-center">
                                    {{#if this.thumbnail}}
                                    <img src="{{this.thumbnail}}" class="card-img" alt="Thumbnail"
                                        style="object-fit: cover; height: 175px; width: 100%;">
                                    {{/if}}
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <p class="card-text"><small
                                                class="text-muted text-uppercase">{{this.category_name}}</small></p>
                                        <h5 class="card-title">
                                            {{#if this.is_premium}}
                                            <i class="bi bi-gem" style="color: #bb29bb;"></i> {{!-- Purple diamond color
                                            --}}
                                            {{/if}}
                                            {{this.title}}
                                        </h5>
                                        <p class="card-text">{{this.abstract}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                    {{#unless @last}}
                    <hr class="my-0">
                    {{/unless}}
                    {{else}}
                    <p class="card-body">No other articles in this category.</p>
                    {{/each}}
                </div>
            </div>
            <hr>
            <div class="comment-section mt-5 p-3 bg-light rounded">
                <!-- Phần form gửi bình luận -->
                <h5 class="mb-4">Chia sẻ ý kiến của bạn</h5>
                <form action="/articles/{{article.id}}/comments" method="POST" class="mb-4">
                    <div class="form-group mb-3">
                        <input type="text" class="form-control" name="guest_name" placeholder="Họ và tên" required>
                    </div>
                    <div class="form-group mb-3">
                        <textarea class="form-control" rows="4" name="content" placeholder="Chia sẻ ý kiến của bạn..."
                            required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Gửi bình luận</button>
                </form>

                <!-- Phần danh sách bình luận -->
                <h5 class="mb-4">Bình luận ({{comments.length}})</h5>
                <div class="comment-list">
                    {{#each comments}}
                    <div class="comment-item mb-3 p-3 bg-white rounded shadow-sm">
                        <div class="d-flex justify-content-between">
                            <!-- Tên và thời gian -->
                            <strong class="text-primary">{{this.author_name}}</strong>
                            <span class="text-muted" style="font-size: 12px;">{{formatDate this.created_at}}</span>
                        </div>
                        <p class="mb-0 mt-2">{{this.content}}</p>
                    </div>
                    {{else}}
                    <p>Chưa có bình luận nào. Hãy là người đầu tiên bình luận!</p>
                    {{/each}}
                </div>
            </div>
        </div>
        <div class="col-3 py-3">
            <div class="sticky-top">
                <div class="mb-3">
                    <h5>Related Articles</h5>
                    <p>Placeholder for related articles content.</p>
                </div>
                <a href="/" class="btn btn-outline-primary mb-3">Back to Home</a>
            </div>
        </div>
    </div>
</div>